<h2>注文履歴詳細</h2>

<div>
  <span>購入者</span>
  <span><%= @order.shipping_name %></span>
</div>

<div>
  <span>注文日</span>
  <span><%= @order.created_at %></span>
</div>

<div>
  <span>配送先</span>
  <span><%= @order.shipping_postal_code %><%= @order.shipping_address %><%= @order.shipping_name %></span>
</div>

<div>
  <span>支払方法</span>
  <span><%= @order.is_receive %></span>
</div>

<div>
  <span>注文ステータス</span>
  <% form_with model: @order do |f| %>
    <span><%= f.select[["入金待ち", "waiting_payment"],["入金確認", "payment_confirmation"],["制作中", "production"],["発送準備中", "shipping_preparation"],["発送済み", "sent"]] %></span>
<%#= f.select :is_receive, Order.is_receive.keys.map {|k| [I18n.t("enums.order.is_receive.#{k}"), k]} %>
    <span><%= f.submit "更新" %></span>
  <% end %>
</div>


<table>
  <thead>
    <tr>
      <th>商品名</th>
      <th>単価(税込)</th>
      <th>数量</th>
      <th>小計</th>
      <th>制作ステータス</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <% @order.order_details.each do |order_detail| %>
        <td>
          <% order_detail.items.each do |item| %>
            <%= item.name %>
          <% end %>
        </td>
        <td><%= order_detail.purchase %></td>
        <td><%= order_detail.amount %></td>
        <td><%= order_detail.purchase*order_detail.amount %></td>
        <td>
          <% form_with model: @order_detail, url: admin_root_path do |f| %>
            <%= f.collection_select(:is_create, @order_details, :is_create, :is_create) %>
            <%= f.submit "更新" %>
          <% end %>
        </td>
      <% end %>
    </tr>
  </tbody>
</table>


<div>
  <span>商品合計</span>
  <span></span>
</div>
<div>
  <span>送料</span>
  <span></span>
</div>
<div>
  <span>請求金額合計</span>
  <span></span>
</div>
